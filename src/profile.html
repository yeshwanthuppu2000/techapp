<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Profile - Enterprise AI Portal</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #0f172a; color: #e2e8f0; }
        #bg-animation { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; }
        .navbar-custom { background: rgba(15, 23, 42, 0.8); backdrop-filter: blur(10px); border-bottom: 1px solid rgba(0, 255, 255, 0.2); }
        .navbar-custom .nav-link, .navbar-custom .navbar-brand { color: #e2e8f0; }
        .navbar-custom .nav-link:hover, .navbar-custom .nav-link.active { color: #00ffff; text-shadow: 0 0 5px rgba(0, 255, 255, 0.5); }
        .content-container { padding-top: 80px; animation: fadeIn 1s ease-out; }
        .profile-card { background: rgba(15, 23, 42, 0.7); border: 1px solid rgba(0, 255, 255, 0.2); border-radius: 15px; padding: 2rem; margin-bottom: 2rem; backdrop-filter: blur(5px); box-shadow: 0 0 15px rgba(0, 255, 255, 0.1); }
        .profile-icon { font-size: 8rem; color: #00ffff; text-shadow: 0 0 15px rgba(0, 255, 255, 0.5); }
        .activity-log { list-style: none; padding: 0; }
        .activity-log li { background: rgba(255, 255, 255, 0.05); padding: 0.75rem 1.25rem; border-radius: 5px; margin-bottom: 0.5rem; }
        .profile-dropdown .dropdown-menu { background: rgba(15, 23, 42, 0.9); border: 1px solid rgba(0, 255, 255, 0.2); }
        .profile-dropdown .dropdown-item, .profile-dropdown .dropdown-item-text { color: #e2e8f0; }
        .profile-dropdown .dropdown-item:hover { background-color: rgba(0, 255, 255, 0.1); }
    </style>
</head>
<body>
    <canvas id="bg-animation"></canvas>
    <nav class="navbar navbar-expand-lg navbar-dark navbar-custom fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand" href="#"><i class="fas fa-brain me-2"></i>Enterprise AI Portal</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class="nav-item"><a class="nav-link" href="/user">Dashboard</a></li>
                    <li class="nav-item"><a class="nav-link active" href="/profile_page">My Profile</a></li>
                </ul>
                <div class="nav-item dropdown profile-dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="profileDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false"><i class="fas fa-user-circle me-1"></i> <span id="profile-username-nav"></span></a>
                    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="profileDropdown">
                        <li><div class="dropdown-item-text">Username: <span id="profile-username-val"></span></div></li>
                        <li><div class="dropdown-item-text">Role: <span id="profile-role-val"></span></div></li>
                        <li><div class="dropdown-item-text">Email: <span id="profile-email-val"></span></div></li>
                        <li><hr class="dropdown-divider" style="border-color: rgba(0, 255, 255, 0.2);"></li>
                        <li><a class="dropdown-item" href="/logout">Sign Out</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </nav>

    <div class="container content-container">
        <div class="row">
            <div class="col-lg-4">
                <div class="profile-card text-center">
                    <i class="fas fa-user-circle profile-icon mb-3"></i>
                    <h3 id="full-name"></h3>
                    <p class="text-white-50" id="username"></p>
                    <p class="text-white-50" id="email"></p>
                    <p class="text-white-50" id="role"></p>
                </div>
            </div>
            <div class="col-lg-8">
                <div class="profile-card">
                    <h3>Recent Activity</h3>
                    <ul class="activity-log" id="activity-log">
                        <li>Logged in at 2024-07-29 10:00 AM</li>
                        <li>Used the "AI Chat" feature</li>
                        <li>Uploaded a document: "report.docx"</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            fetch('/profile').then(res => res.json()).then(data => {
                document.getElementById('profile-username-nav').textContent = data.username;
                document.getElementById('profile-username-val').textContent = data.username;
                document.getElementById('profile-role-val').textContent = data.role;
                document.getElementById('profile-email-val').textContent = data.email;
                document.getElementById('full-name').textContent = data.full_name;
                document.getElementById('username').textContent = `Username: ${data.username}`;
                document.getElementById('email').textContent = `Email: ${data.email}`;
                document.getElementById('role').textContent = `Role: ${data.role}`;
            });

            const canvas = document.getElementById('bg-animation');
            const ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            let particlesArray;

            class Particle { constructor() { this.x = Math.random() * canvas.width; this.y = Math.random() * canvas.height; this.size = Math.random() * 2 + 1; this.speedX = Math.random() * 0.5 - 0.25; this.speedY = Math.random() * 0.5 - 0.25; this.color = 'rgba(0, 255, 255, 0.5)'; } update() { if (this.x > canvas.width || this.x < 0) this.speedX *= -1; if (this.y > canvas.height || this.y < 0) this.speedY *= -1; this.x += this.speedX; this.y += this.speedY; } draw() { ctx.fillStyle = this.color; ctx.beginPath(); ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2); ctx.fill(); } }
            function init() { particlesArray = []; let numberOfParticles = (canvas.height * canvas.width) / 9000; for (let i = 0; i < numberOfParticles; i++) { particlesArray.push(new Particle()); } }
            function animate() { ctx.clearRect(0, 0, canvas.width, canvas.height); for (let i = 0; i < particlesArray.length; i++) { particlesArray[i].update(); particlesArray[i].draw(); } connect(); requestAnimationFrame(animate); }
            function connect() { let opacityValue = 1; for (let a = 0; a < particlesArray.length; a++) { for (let b = a; b < particlesArray.length; b++) { let distance = ((particlesArray[a].x - particlesArray[b].x) * (particlesArray[a].x - particlesArray[b].x)) + ((particlesArray[a].y - particlesArray[b].y) * (particlesArray[a].y - particlesArray[b].y)); if (distance < (canvas.width / 7) * (canvas.height / 7)) { opacityValue = 1 - (distance / 20000); ctx.strokeStyle = `rgba(0, 255, 255, ${opacityValue})`; ctx.lineWidth = 1; ctx.beginPath(); ctx.moveTo(particlesArray[a].x, particlesArray[a].y); ctx.lineTo(particlesArray[b].x, particlesArray[b].y); ctx.stroke(); } } } }
            window.addEventListener('resize', () => { canvas.width = window.innerWidth; canvas.height = window.innerHeight; init(); });
            init();
            animate();
        });
    </script>
</body>
</html>
